---
interface Props {
  id: string
}

const { id } = Astro.props
---

<!-- <button 
  data-open-modal={id}
  class="px-4 py-2 bg-blue-500 text-white rounded">
  Open Modal {id}
</button> -->

  <!-- Modal -->
<div data-overlay-id={id} class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-10">
  <div data-modal-id={id} class="bg-white p-6 rounded shadow-lg max-w-md w-full z-20">
    <h2 class="text-xl font-bold mb-4">Modal Title  { id }</h2>
    
  </div>
</div>


<script is:inline define:vars={{ id }}>
  document.addEventListener("astro:page-load", () => {
    const modal = document.querySelector(`[data-modal-id="${id}"]`);
    const buttons = document.querySelectorAll(`[data-open-modal="${id}"]`);
    const overlay = document.querySelector(`[data-overlay-id="${id}"]`);

    if (!modal || !buttons || !overlay) {
      return;
    }
    gsap.set(modal, { scale: 0.5 });
    gsap.set(overlay, { opacity: 0, display: 'none' });

    buttons.forEach((button) => {
      button.addEventListener('click', openModal);
    });

    overlay.addEventListener('click', (e) => {
      if (e.target === overlay) {
        closeModal();
      }
    });

    function closeModal() {
      gsap.to(modal, { scale: 0.5, duration: 0.2 });
      gsap.to(overlay, { opacity: 0, display: 'none', duration: 0.2 });
    }

    function openModal() {
      gsap.to(modal, { scale: 1, duration: 0.2 });
      gsap.to(overlay, { opacity: 1, display: 'flex', duration: 0.2 });
    }
    
  });

</script>

